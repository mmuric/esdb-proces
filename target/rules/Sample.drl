import com.execute.obj.Message;
import com.execute.obj.event.SpinningHi;
import com.execute.obj.event.SpeedLimit;
import org.goodoldai.jeff.wizard.JEFFWizard;
import java.util.Date;
import java.text.DecimalFormat;
import org.goodoldai.jeff.explanation.data.ThreeDimData;
import org.goodoldai.jeff.explanation.data.Triple;
import org.goodoldai.jeff.explanation.data.TwoDimData;
import org.goodoldai.jeff.explanation.data.Tuple;
import org.goodoldai.jeff.explanation.data.Dimension;
import java.util.ArrayList;

global JEFFWizard wizard;



// eliminaciona pravila
rule "Rule 01 If there is no traveled distance there will be no report"
	when
		m : Message( totalTraveledDistance == 0, typeOfDriver == "none" )	
	then
		System.out.println("nema driver\t" + m.getDriverId());
		wizard.addText("Rule 01 If there is no traveled distance there will be no report", null);
		m.setTypeOfDriver("unknown");
		update(m);
end

rule "Testing a vehicle and installed device"
	when
		m: Message( totalTraveledDistance < boundaryTraveledDistanceKm, totalEvents > 0, typeOfDriver == "none" )
	then
		System.out.println("test driver\t" + m.getDriverId());
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[2];
		content[0] = df.format(m.getTotalTraveledDistance());
		content[1] = m.getTotalEvents();
		
		wizard.addTextWarning("Testing a vehicle and installed device", content);
		
		ArrayList<Tuple> values = new ArrayList<Tuple>();
        values.add(new Tuple("Harsh acceleration", m.getNumHiAcc() + m.getNumMidAcc()));
        values.add(new Tuple("Harsh deceleration", m.getNumHiDec() + m.getNumMidDec()));
        values.add(new Tuple("High speed cornering", m.getNumHiCornering() + m.getNumMidCornering()));
        values.add(new Tuple("Vehicle skidding", m.getNumHiSkidding()));
        values.add(new Tuple("Vehicle abrupt turning", m.getNumHiAbruptTurning()));
        values.add(new Tuple("Abrupt lane changing", m.getNumHiAggressiveLaneChange() + m.getNumMidAggressiveLaneChange()));
        values.add(new Tuple("Barrier avoidance", m.getNumHiBarrierAvoidance() + m.getNumMidBarrierAvoidance()));
        values.add(new Tuple("Speed limit", m.getNumSpeedLimit()));
		
		
		
		wizard.addData("Testing a vehicle and installed device", new TwoDimData(
			new Dimension("Naziv prekrsaja"),
			new Dimension("Ukupno"),
			values
		));
		
		m.setTypeOfDriver("test-driver");
		update(m);
end

rule "Rule 02 There is no irregular behavior of the driver"
	when
		m : Message( totalTraveledDistance >= boundaryTraveledDistanceKm, totalEvents == 0, typeOfDriver == "none" )
	then
		m.setPartSpeedLimit(0);
		m.setPartSkiddingHi(0);
		m.setPartDecMid(0);
		m.setPartDecHi(0);
		m.setPartCorneringMid(0);
		m.setPartCorneringHi(0);
		m.setPartBarrierAvoidanceMid(0);
		m.setPartBarrierAvoidanceHi(0);
		m.setPartAggressiveLaneChangeMid(0);
		m.setPartAggressiveLaneChangeHi(0);
		m.setPartAccMid(0);
		m.setPartAccHi(0);
		m.setPartAbruptTurningHi(0);
		m.setTypeOfDriver("exelent");
		update(m);
end

// odredjivanje limita i negativnih poena
rule "Rule 04 limit of negative score is 0"
	when
		m : Message( totalTraveledDistance >= boundaryTraveledDistanceKm, totalTraveledDistance <= totalDistanceMidKm, maxEvent == 0, typeOfDriver == "none" )
	then
		m.setMaxEvent(1);
		m.setLimit(1);
		update(m);
		System.out.println("RULE 04 limit of negative score is " + m.getTotalTraveledDistance() + "\t" + m.getTotalEvents() + "\t" + m.getLimit());
end

rule "Rule 05 set number of events, per travel distance"
	when
		m : Message( totalTraveledDistance > totalDistanceMidKm, maxEvent == 0, typeOfDriver == "none" )
	then		
		float distanceRount = m.getTotalTraveledDistance() / 1000;
		int result = (int)  Math.ceil( distanceRount * m.getTotalEventPerKm() );
		m.setMaxEvent(result);
		System.out.println("RULE 05 Maximum number of event is\t" + result);
		update(m);
end  

rule "Rule 06 set limit of negative points for traveled distance below than average"				
	when
		m : Message( maxEvent > 0, limit == 0, totalTraveledDistance > totalDistanceMidKm, totalTraveledDistance <= totalDistanceAverageKm, typeOfDriver == "none", maxEvent: maxEvent )
	then	
		int bonusPoints = (int)  Math.ceil((1-(m.getTotalTraveledDistance() / m.getTotalDistanceAverageKm()))*100);
		System.out.println("RULE 06 Max number of event: " + m.getMaxEvent() + " bonus: " + bonusPoints + " and limit is: " + m.getLimit());		
		m.setLimit( maxEvent + bonusPoints );
		update(m);		
end

rule "Rule 07 set limit of negative points for traveled distance below than high"			
	when
		m : Message( maxEvent > 0, limit == 0, totalTraveledDistance > totalDistanceAverageKm, totalTraveledDistance <= totalDistanceHiKm, typeOfDriver == "none", maxEvent: maxEvent )
	then	
		int bonusPoints = (int)  Math.ceil((1-(m.getTotalTraveledDistance() / m.getTotalDistanceHiKm()))*200);
		System.out.println("RULE 07 Max number of event: " + m.getMaxEvent() + " bonus: " + bonusPoints + " and limit is: " + m.getLimit());
		m.setLimit( maxEvent + bonusPoints );		
		update(m);				
end

rule "Rule 08 set limit of negative points for traveled distance over than high"			
	when
		m : Message( maxEvent > 0, limit == 0, totalTraveledDistance > totalDistanceHiKm, typeOfDriver == "none", maxEvent: maxEvent )
	then	
		int bonusPoints = (int)  Math.ceil((1-((m.getTotalTraveledDistance() - m.getTotalDistanceHiKm() )/ m.getTotalDistanceHiKm()))*100);
		System.out.println("RULE 08 Max number of event: " + m.getMaxEvent() + " bonus: " + bonusPoints + " and limit is: " + m.getLimit());
		m.setLimit( maxEvent + bonusPoints );		
		update(m);				
end

rule "Rule 09 set acceleration points for severity level medium if numMidAcc is less than allowed"
	when
		m : Message( (float)(numMidAcc/totalTraveledDistance) <= (float)(eventPerKmAccMid/kmBase), partAccMid == Integer.MIN_VALUE, typeOfDriver == "none" ) 
	then
		m.setPartAccMid(0);
		update(m);
		//System.out.println( "Rule 09 no acc point for severity level midium: " + m.getPartAccMid() );
end

rule "Rule 10 set acceleration points for severity level medium if numMidAcc is greater than allowed"
	when
		m : Message( (float)(numMidAcc/totalTraveledDistance) > (float)(eventPerKmAccMid/kmBase), partAccMid == Integer.MIN_VALUE, typeOfDriver == "none", numMidAcc: numMidAcc, eventPerKmAccMid: eventPerKmAccMid ) 
	then		
		int points = (int)  Math.ceil(m.getPointsForSeverity1(numMidAcc, eventPerKmAccMid));
		
		m.setPartAccMid(points);
		m.setTotal(m.getTotal() + points);
		update(m);
		//System.out.println( "Acc point for severity level midium: " + m.getPartAccMid() );		
end

rule "Rule 11 set acceleration points for severity level high if numHiAcc is less than allowed"
	when
		m : Message( (float)(numHiAcc/totalTraveledDistance) <= (float)(eventPerKmAccHi/kmBase), partAccHi == Integer.MIN_VALUE, typeOfDriver == "none" ) 
	then
		m.setPartAccHi(0);
		update(m);
		//System.out.println( "Rule 11 no acc point for severity level hi: " + m.getPartAccHi() );
end

rule "Rule 12 set acceleration points for severity level high if numHiAcc is greater than allowed"
	when
		m : Message( (float)(numHiAcc/totalTraveledDistance) > (float)(eventPerKmAccHi/kmBase), partAccHi == Integer.MIN_VALUE, typeOfDriver == "none", numHiAcc: numHiAcc, eventPerKmAccHi: eventPerKmAccHi ) 
	then		
		int points = (int)  Math.ceil(m.getPointsForSeverity2(numHiAcc, eventPerKmAccHi));
		
		m.setPartAccHi(points);
		m.setTotal(m.getTotal() + points);
		update(m);
		//System.out.println( "Acc point for severity level high: " + m.getPartAccHi() );		
end

rule "Rule 13 set deceleration points for severity level medium if numMidDec is less than allowed"
	when
		m : Message( (float)(numMidDec/totalTraveledDistance) <= (float)(eventPerKmDecMid/kmBase), partDecMid == Integer.MIN_VALUE, typeOfDriver == "none" ) 
	then
		m.setPartDecMid(0);
		update(m);
		//System.out.println( "no dec point for severity level midium: " + m.getPartDecMid() );
end

rule "Rule 14 set deceleration points for severity level medium if numMidDec is greater than allowed"
	when
		m : Message( (float)(numMidDec/totalTraveledDistance) > (float)(eventPerKmDecMid/kmBase), partDecMid == Integer.MIN_VALUE, typeOfDriver == "none", numMidDec: numMidDec, eventPerKmDecMid: eventPerKmDecMid  ) 
	then		
		int points = (int)  Math.ceil(m.getPointsForSeverity1(numMidDec, eventPerKmDecMid));
		
		m.setPartDecMid(points);
		m.setTotal(m.getTotal() + points);
		update(m);
		//System.out.println( "Dec point for severity level midium: " + m.getPartDecMid() );		
end

rule "Rule 15 set deceleration points for severity level high if numHiDec is less than allowed"
	when
		m : Message( (float)(numHiDec/totalTraveledDistance) <= (float)(eventPerKmDecHi/kmBase), partDecHi == Integer.MIN_VALUE, typeOfDriver == "none" ) 
	then
		m.setPartDecHi(0);
		update(m);
		//System.out.println( "no dec point for severity level hi: " + m.getPartDecHi() );
end

rule "Rule 16 set deceleration points for severity level hi if numHiDec is greater than allowed"
	when
		m : Message( (float)(numHiDec/totalTraveledDistance) > (float)(eventPerKmDecHi/kmBase), partDecHi == Integer.MIN_VALUE, typeOfDriver == "none", numHiDec: numHiDec, eventPerKmDecHi: eventPerKmDecHi ) 
	then		
		int points = (int)  Math.ceil(m.getPointsForSeverity2(numHiDec, eventPerKmDecHi));
		
		m.setPartDecHi(points);
		m.setTotal(m.getTotal() + points);
		update(m);
		//System.out.println( "Dec point for severity level midium: " + m.getPartDecHi() );		
end

rule "Rule 17 set harsh cornering points for severity level mid if numHiDec is less than allowed"
	when
		m : Message( (float)(numMidCornering/totalTraveledDistance) <= (float)(eventPerKmCorneringMid/kmBase), partCorneringMid == Integer.MIN_VALUE, typeOfDriver == "none" ) 
	then
		m.setPartCorneringMid(0);
		update(m);
		//System.out.println( "no harsh cornering point for severity level mid: " + m.getPartCorneringMid() );
end

rule "Rule 18 set harsh cornering points for severity level mid if numMidCornering is greater than allowed"
	when
		m : Message( (float)(numMidCornering/totalTraveledDistance) > (float)(eventPerKmCorneringMid/kmBase), partCorneringMid == Integer.MIN_VALUE, typeOfDriver == "none", numMidCornering: numMidCornering, eventPerKmCorneringMid: eventPerKmCorneringMid ) 
	then		
		int points = (int)  Math.ceil(m.getPointsForSeverity1(numMidCornering, eventPerKmCorneringMid));
		
		m.setPartCorneringMid(points);
		m.setTotal(m.getTotal() + points);
		update(m);
		//System.out.println( "Harsh cornering point for severity level midium: " + m.getPartCorneringMid() );		
end

rule "Rule 19 set harsh cornering points for severity level hi if numHiDec is less than allowed"
	when
		m : Message( (float)(numHiCornering/totalTraveledDistance) <= (float)(eventPerKmCorneringHi/kmBase), partCorneringHi == Integer.MIN_VALUE, typeOfDriver == "none" ) 
	then
		m.setPartCorneringHi(0);
		update(m);
		//System.out.println( "no harsh cornering point for severity level hi: " + m.getPartCorneringMid() );
end

rule "Rule 20 set harsh cornering points for severity level hi if numHiDec is greater than allowed"
	when
		m : Message( (float)(numHiCornering/totalTraveledDistance) > (float)(eventPerKmCorneringHi/kmBase), partCorneringHi == Integer.MIN_VALUE, typeOfDriver == "none", numHiCornering: numHiCornering, eventPerKmCorneringHi: eventPerKmCorneringHi ) 
	then		
		int points = (int)  Math.ceil(m.getPointsForSeverity2(numHiCornering, eventPerKmCorneringHi));
		
		m.setPartCorneringHi(points);
		m.setTotal(m.getTotal() + points);
		update(m);
		//System.out.println( "Harsh cornering point for severity level hi: " + m.getPartCorneringHi() );		
end

rule "Rule 21 set vehicle skidding points if numHiSkidding is less than allowed"
	when
		m : Message( (float)(numHiSkidding/totalTraveledDistance) <= (float)(eventPerKmSkiddingHi/kmBase), partSkiddingHi == Integer.MIN_VALUE, typeOfDriver == "none" ) 
	then
		m.setPartSkiddingHi(0);
		update(m);
		//System.out.println( "no vehicle skidding: " + m.getPartSkiddingHi() );
end

rule "Rule 22 set vehicle skidding points if numHiSkidding is greater than allowed"
	when
		m : Message( (float)(numHiSkidding/totalTraveledDistance) > (float)(eventPerKmSkiddingHi/kmBase), partSkiddingHi == Integer.MIN_VALUE, typeOfDriver == "none", numHiSkidding: numHiSkidding, eventPerKmSkiddingHi: eventPerKmSkiddingHi ) 
	then		
		int points = (int)  Math.ceil(m.getPointsForSeverity2(numHiSkidding, eventPerKmSkiddingHi));
		
		m.setPartSkiddingHi(points);
		m.setTotal(m.getTotal() + points);
		update(m);
		//System.out.println( "Vehicle skidding: " + m.getPartSkiddingHi() );		
end

rule "Rule 23 set abrupt turning points if numHiAbruptTurning is less than allowed"
	when
		m : Message( (float)(numHiAbruptTurning/totalTraveledDistance) <= (float)(eventPerKmAbruptTurningHi/kmBase), partAbruptTurningHi == Integer.MIN_VALUE, typeOfDriver == "none" ) 
	then
		m.setPartAbruptTurningHi(0);
		update(m);
		//System.out.println( "No abrupt turning: " + m.getPartAbruptTurningHi() );
end

rule "Rule 24 set abrupt turning points if numHiAbruptTurning is greater than allowed"
	when
		m : Message( (float)(numHiAbruptTurning/totalTraveledDistance) > (float)(eventPerKmSkiddingHi/kmBase), partAbruptTurningHi == Integer.MIN_VALUE, typeOfDriver == "none", numHiAbruptTurning: numHiAbruptTurning, eventPerKmAbruptTurningHi: eventPerKmAbruptTurningHi ) 
	then		
		int points = (int)  Math.ceil(m.getPointsForSeverity2(numHiAbruptTurning, eventPerKmAbruptTurningHi));
		
		m.setPartAbruptTurningHi(points);
		m.setTotal(m.getTotal() + points);
		update(m);
		//System.out.println( "Abrupt turning: " + m.getPartAbruptTurningHi() );		
end

rule "Rule 25 set aggressive lane change points if numMidAggressiveLaneChange is less than allowed"
	when
		m : Message( (float)(numMidAggressiveLaneChange/totalTraveledDistance) <= (float)(eventPerKmAggressiveLaneChangeMid/kmBase), partAggressiveLaneChangeMid == Integer.MIN_VALUE, typeOfDriver == "none" ) 
	then
		m.setPartAggressiveLaneChangeMid(0);
		update(m);
		//System.out.println( "no aggressive lane change severity 1: " + m.getPartAggressiveLaneChangeMid() );
end

rule "Rule 26 set aggressive lane change points if numMidAggressiveLaneChange is greater than allowed"
	when
		m : Message( (float)(numMidAggressiveLaneChange/totalTraveledDistance) > (float)(eventPerKmAggressiveLaneChangeMid/kmBase), partAggressiveLaneChangeMid == Integer.MIN_VALUE, numMidAggressiveLaneChange: numMidAggressiveLaneChange, eventPerKmAggressiveLaneChangeMid: eventPerKmAggressiveLaneChangeMid, typeOfDriver == "none" ) 
	then		
		int points = (int)  Math.ceil(m.getPointsForSeverity1(numMidAggressiveLaneChange, eventPerKmAggressiveLaneChangeMid));
		
		m.setPartAggressiveLaneChangeMid(points);
		m.setTotal(m.getTotal() + points);
		update(m);
		//System.out.println( "Aggressive lane change for severity 1: " + m.getPartAggressiveLaneChangeMid() );		
end

rule "Rule 27 set aggressive lane change points if numHiAggressiveLaneChange is less than allowed"
	when
		m : Message( (float)(numHiAggressiveLaneChange/totalTraveledDistance) <= (float)(eventPerKmAggressiveLaneChangeHi/kmBase), partAggressiveLaneChangeHi == Integer.MIN_VALUE, typeOfDriver == "none" ) 
	then
		m.setPartAggressiveLaneChangeHi(0);
		update(m);
		//System.out.println( "no aggressive lane change severity 2: " + m.getPartAggressiveLaneChangeHi() );
end

rule "Rule 28 set aggressive lane change points if numHiAggressiveLaneChange is greater than allowed"
	when
		m : Message( (float)(numHiAggressiveLaneChange/totalTraveledDistance) > (float)(eventPerKmAggressiveLaneChangeHi/kmBase), partAggressiveLaneChangeHi == Integer.MIN_VALUE, typeOfDriver == "none", numHiAggressiveLaneChange: numHiAggressiveLaneChange, eventPerKmAggressiveLaneChangeHi: eventPerKmAggressiveLaneChangeHi ) 
	then		
		int points = (int)  Math.ceil(m.getPointsForSeverity2(numHiAggressiveLaneChange, eventPerKmAggressiveLaneChangeHi));
		
		m.setPartAggressiveLaneChangeHi(points);
		m.setTotal(m.getTotal() + points);
		update(m);
		//System.out.println( "Aggressive lane change for severity 2: " + m.getPartAggressiveLaneChangeHi() );		
end

rule "Rule 29 set barrier avoidance points if numMidBarrierAvoidance is less than allowed"
	when
		m : Message( (float)(numMidBarrierAvoidance/totalTraveledDistance) <= (float)(eventPerKmBarrierAvoidanceMid/kmBase), partBarrierAvoidanceMid == Integer.MIN_VALUE, typeOfDriver == "none" ) 
	then
		m.setPartBarrierAvoidanceMid(0);
		update(m);
		//System.out.println( "no barrier avoidance severity 1: " + m.getPartBarrierAvoidanceMid() );
end

rule "Rule 30 set barrier avoidance points if numMidBarrierAvoidance is greater than allowed"
	when
		m : Message( (float)(numMidBarrierAvoidance/totalTraveledDistance) > (float)(eventPerKmBarrierAvoidanceMid/kmBase), partBarrierAvoidanceMid  == Integer.MIN_VALUE, typeOfDriver == "none", numMidBarrierAvoidance: numMidBarrierAvoidance, eventPerKmBarrierAvoidanceMid: eventPerKmBarrierAvoidanceMid ) 
	then		
		int points = (int)  Math.ceil(m.getPointsForSeverity1(numMidBarrierAvoidance, eventPerKmBarrierAvoidanceMid));
		
		m.setPartBarrierAvoidanceMid(points);
		m.setTotal(m.getTotal() + points);
		update(m);
		//System.out.println( "Barrier avoidance for severity 1: " + m.getPartBarrierAvoidanceMid() );		
end

rule "Rule 31 set barrier avoidance points if numHiBarrierAvoidance is less than allowed"
	when
		m : Message( (float)(numHiBarrierAvoidance/totalTraveledDistance) <= (float)(eventPerKmBarrierAvoidanceHi/kmBase), partBarrierAvoidanceHi  == Integer.MIN_VALUE, typeOfDriver == "none" ) 
	then
		m.setPartBarrierAvoidanceHi(0);
		update(m);
		//System.out.println( "no barrier avoidance severity 2: " + m.getPartBarrierAvoidanceHi() );
end

rule "Rule 32 set barrier avoidance points if numHiBarrierAvoidance is greater than allowed"
	when
		m : Message( (float)(numHiBarrierAvoidance/totalTraveledDistance) > (float)(eventPerKmBarrierAvoidanceHi/kmBase), partBarrierAvoidanceHi == Integer.MIN_VALUE, typeOfDriver == "none", numHiBarrierAvoidance: numHiBarrierAvoidance, eventPerKmBarrierAvoidanceHi: eventPerKmBarrierAvoidanceHi ) 
	then		
		int points = (int)  Math.ceil(m.getPointsForSeverity2(numHiBarrierAvoidance, eventPerKmBarrierAvoidanceHi));
		
		m.setPartBarrierAvoidanceHi(points);
		m.setTotal(m.getTotal() + points);
		update(m);
		//System.out.println( "Barrier avoidance for severity 2: " + m.getPartBarrierAvoidanceHi() );		
end

rule "Rule 33 check if spinning is allowed"
	when
		m: Message( numHiSpinning > 0, numHiSpinningAllowed == Integer.MIN_VALUE)
		exists SpinningHi(datetimeTriggered > m.getDateFrom(), datetimeTriggered < m.getDateTo()) from m.getSpinningList()
	then
		int count = 0;
		Date dateFrom = new java.text.SimpleDateFormat("yyyy-MM-dd HH:mm:ss").parse(m.getDateFrom() + " 00:00:00"); 
		Date dateTo = new java.text.SimpleDateFormat("yyyy-MM-dd HH:mm:ss").parse(m.getDateTo() + " 00:00:00");
		
		for(SpinningHi sh : m.getSpinningList()) {
			Date datetimeTriggered = new java.text.SimpleDateFormat("yyyy-MM-dd HH:mm:ss").parse(sh.getDatetimeTriggered());
			if ( dateFrom.before(datetimeTriggered) && dateTo.after(datetimeTriggered) ) {
				count++;
			}			
		}
		
		//System.out.println("dozvoljeno " +count);

		m.setNumHiSpinningAllowed(count);
		update(m);
end

rule "Rule 33 check if spinning is not allowed"
	when
		m: Message( numHiSpinning > 0, numHiSpinningNotAllowed == Integer.MIN_VALUE)
		exists SpinningHi(datetimeTriggered < m.getDateFrom() || datetimeTriggered > m.getDateTo()) from m.getSpinningList()
	then
		int count = 0;
		Date dateFrom = new java.text.SimpleDateFormat("yyyy-MM-dd HH:mm:ss").parse(m.getDateFrom() + " 00:00:00"); 
		Date dateTo = new java.text.SimpleDateFormat("yyyy-MM-dd HH:mm:ss").parse(m.getDateTo() + " 00:00:00");
		
		for(SpinningHi sh : m.getSpinningList()) {
			Date datetimeTriggered = new java.text.SimpleDateFormat("yyyy-MM-dd HH:mm:ss").parse(sh.getDatetimeTriggered());
			if ( datetimeTriggered.before(dateFrom) || datetimeTriggered.after(dateTo) ) {
				count++;
			}			
		}

		//System.out.println("nije dozvoljeno " +count);

		m.setNumHiSpinningNotAllowed(count);
		update(m);
end

rule "Rule 34 set points for allowed spinning if is less than allowed"
	when
		m: Message( (float)(numHiSpinningAllowed/totalTraveledDistance) <= (float)(eventPerKmSpinningHiInWinter/kmBase), partSpinningHiAllowed == Integer.MIN_VALUE, numHiSpinningAllowed: numHiSpinningAllowed, eventPerKmSpinningHiInWinter: eventPerKmSpinningHiInWinter )
	then
		int points = 0;		
		//System.out.println("negativni poeni za spinove koji su dozvoljeni a manji su od granicnih: " + points);			
		m.setPartSpinningHiAllowed(points);
		m.setTotal(m.getTotal() + points);
		update(m);	
end

rule "Rule 36 set points for allowed spinning if is greater than allowed"
	when
		m: Message( (float)(numHiSpinningAllowed/totalTraveledDistance) > (float)(eventPerKmSpinningHiInWinter/kmBase), partSpinningHiAllowed == Integer.MIN_VALUE, numHiSpinningAllowed: numHiSpinningAllowed, eventPerKmSpinningHiInWinter: eventPerKmSpinningHiInWinter )
	then
		float n = ((numHiSpinningAllowed-eventPerKmSpinningHiInWinter)/eventPerKmSpinningHiInWinter) * 100;
		int points = (int)  Math.ceil(numHiSpinningAllowed + n);
		
		//System.out.println("negativni poeni za spinove koji su dozvoljeni " + points);
			
		m.setPartSpinningHiAllowed(points);
		m.setTotal(m.getTotal() + points);
		update(m);	
end

rule "Rule 37 set points for spinning if is less than allowed"
	when
		m: Message( (float)(numHiSpinningNotAllowed/totalTraveledDistance) <= (float)(eventPerKmSpinningHi/kmBase), partSpinningHiNotAllowed == Integer.MIN_VALUE, numEvent: numHiSpinningNotAllowed )
	then
	//	System.out.println("Nema spina " + 0);
		m.setPartSpinningHiNotAllowed(0);
		update(m);
end

rule "Rule 38 set points for spinning if is greater than allowed"
	when
		m: Message( (float)(numHiSpinningNotAllowed/totalTraveledDistance) > (float)(eventPerKmSpinningHi/kmBase), partSpinningHiNotAllowed == Integer.MIN_VALUE, numEvent: numHiSpinningNotAllowed )
	then
		//System.out.println("Ukupno spinova " + numEvent);
		m.setPartSpinningHiNotAllowed(m.getLimit() + numEvent);
		m.setTotal(m.getTotal() + m.getPartSpinningHiNotAllowed());
		m.setTypeOfDriver("extreme");
		update(m);
end

rule "Rule 39 set speed limit points if numSpeedLimit is less than allowed"
	when
		m : Message( (float)(numSpeedLimit/totalTraveledDistance) <= (float)(eventPerKmSpeedLimit/kmBase), partSpeedLimit  == Integer.MIN_VALUE, typeOfDriver == "none" ) 
	then
		m.setPartSpeedLimit(0);
		update(m);
		//System.out.println( "Ovo je speed limit: " + m.getPartBarrierAvoidanceHi() );
end

rule "Rule 40 set negative points for speed limit"
	when
		m: Message((float)(numSpeedLimit/totalTraveledDistance) > (float)(eventPerKmSpeedLimit/kmBase), partSpeedLimit == Integer.MIN_VALUE, typeOfDriver == "none") 
	then
		int points = 0;
		int i = 0;
		
		for(SpeedLimit sl: m.getSpeedLimitList()) {
			if (i >= (int) m.getEventPerKmSpeedLimit()) {
				int n = (int)  Math.ceil(((sl.getSpeedOver() - sl.getSpeedLimit())/sl.getSpeedLimit()) * 100);
				points = points + n;
			} 
			i++;
		}
		
		//System.out.println("Negativni bodovi za speed limit " + points);
		
		m.setPartSpeedLimit(points);
		m.setTotal(m.getTotal() + points);
		update(m);
end

rule "debug rule"
	when 
		m: Message( typeOfDriver == "none" )
	then
		System.out.println("---------------");
		System.out.println("Predjeni put:\t" + m.getTotalTraveledDistance());
		System.out.println("Driver id:\t" + m.getDriverId());
		System.out.println("Tip vozaca:\t" + m.getTypeOfDriver());
		System.out.println("Total:\t" + m.getTotal());
		System.out.println("Limit:\t" + m.getLimit());
		System.out.println("---------------");
end

rule "Set unknown type because we do not have enough data to determine driver behaviour"
	when 
		m: Message( typeOfDriver == "none", totalTraveledDistance < boundaryTraveledDistanceKm, total == 0, total: totalEvents )
	then
		Object [] content = new Object[2];
		content[0] = m.getTotalTraveledDistance();
		content[1] = total;
		
		wizard.addTextVeryPositive("Set unknown type because we do not have enough data to determine driver behaviour", content);		
		m.setTypeOfDriver("unknown");
		update(m);	
end

rule "Set status excellent for driver that have total score equal to zero"
	when 
		m: Message( typeOfDriver in ("none", "exelent"), totalTraveledDistance > boundaryTraveledDistanceKm, total == 0, limit: limit, events: totalEvents )
	then
		Object [] content = new Object[4];
		content[0] = m.getTotalTraveledDistance();
		content[1] = m.getTotalTraveledDistance() - m.getBoundaryTraveledDistanceKm();
		content[2] = limit;
		content[3] = events;
			
		wizard.addTextVeryPositive("Set status excellent for driver that have total score equal to zero", content);	
		
		ArrayList<Tuple> values = new ArrayList<Tuple>();
        values.add(new Tuple("Harsh acceleration", m.getNumHiAcc() + m.getNumMidAcc()));
        values.add(new Tuple("Harsh deceleration", m.getNumHiDec() + m.getNumMidDec()));
        values.add(new Tuple("High speed cornering", m.getNumHiCornering() + m.getNumMidCornering()));
        values.add(new Tuple("Vehicle skidding", m.getNumHiSkidding()));
        values.add(new Tuple("Vehicle abrupt turning", m.getNumHiAbruptTurning()));
        values.add(new Tuple("Abrupt lane changing", m.getNumHiAggressiveLaneChange() + m.getNumMidAggressiveLaneChange()));
        values.add(new Tuple("Barrier avoidance", m.getNumHiBarrierAvoidance() + m.getNumMidBarrierAvoidance()));
        values.add(new Tuple("Speed limit", m.getNumSpeedLimit()));
		
		
		
		wizard.addData("Set status excellent for driver that have total score equal to zero", new TwoDimData(
			new Dimension("Naziv prekrsaja"),
			new Dimension("Ukupno"),
			values
		));
			
		m.setTypeOfDriver("excellent");		
		update(m);
end

rule "Rule 45 Set ok status for driver"
	when 
		m: Message( typeOfDriver == "none", total < limit, ((total/ limit) *100) <= 20, total: total, limit: limit, result: ((total/limit) *100) )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getTotalTraveledDistance();
		content[1] = limit;
		content[2] = total; 
		content[3] = df.format(result); 
		
		wizard.addTextVeryPositive("Rule 45 Set ok status for driver", content);		
		m.setTypeOfDriver("ok");
		update(m);		
end

rule "Rule 46 Set border status for driver"
	when
		m: Message( typeOfDriver == "none", total < limit, ((total/ limit) *100) > 20, ((total/ limit) *100) <= 40, total: total, limit: limit, result: ((total/limit) *100) )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getTotalTraveledDistance();
		content[1] = limit;
		content[2] = total; 
		content[3] = df.format(result); 
		
		wizard.addText("Rule 46 Set border status for driver", content);
		m.setTypeOfDriver("border");
		update(m);
end

rule "Rule 47 Set risk status for driver"
	when
		m: Message( typeOfDriver == "none", total < limit, ((total/ limit) *100) > 40, ((total/ limit) *100) <= 70, total: total, limit: limit, result: ((total/limit) *100) )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getTotalTraveledDistance();
		content[1] = limit;
		content[2] = total; 
		content[3] = df.format(result); 
		
		wizard.addTextWarning("Rule 47 Set risk status for driver", content);
		m.setTypeOfDriver("risk");
		update(m);
end

rule "Rule 48 Set agresive status for driver"
	when
		m: Message(typeOfDriver == "none", total < limit, ((total/ limit) *100) > 70, ((total/ limit) *100) <= 100, total: total, limit: limit, result: ((total/ limit) *100) )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getTotalTraveledDistance();
		content[1] = limit;
		content[2] = total; 
		content[3] = df.format(result);
				
		wizard.addTextNegative("Rule 48 Set agresive status for driver", content);
		m.setTypeOfDriver("agresive");
		update(m);
end
	
rule "Rule 49 Set extreme status for driver"
	when
		m: Message( typeOfDriver == "none", total > limit, total: total, limit: limit, result: (((total - limit)/ limit) *100) )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);		
		Object [] content = new Object[4];
		content[0] = m.getTotalTraveledDistance();
		content[1] = limit;
		content[2] = total; 
		content[3] = df.format(result);
		
		wizard.addTextVeryNegative("Rule 49 Set extreme status for driver", content);
		m.setTypeOfDriver("extreme");
		update(m);
end


rule "Rule 50 Postavi eventOfLowerImportance"
	when
		m: Message( typeOfDriver in ("ok", "border", "risk", "agresive"), eventOfLowerImportance == Integer.MIN_VALUE, limit: limit )
	then
		float totalLowImportance = m.getPartAccHi() + m.getPartAccMid() + m.getPartDecHi() + m.getPartDecMid() + m.getPartCorneringHi() + m.getPartCorneringMid() + m.getPartSpeedLimit();
		float lowImportance = (totalLowImportance) / (7 * limit);
		Object [] content = new Object[1];
		content[0] = (int) totalLowImportance;
		System.out.println("niska znacajnost " + lowImportance + " ukupno " + totalLowImportance  + " limit: " +limit);
		
		wizard.addText("Rule 50 Postavi eventOfLowerImportance", content);
		m.setEventOfLowerImportance((float)lowImportance);
		update(m);
end

rule "Rule 51 Postavi eventOfHighImportance"
	when
		m: Message( typeOfDriver in ("ok", "border", "risk", "agresive"), eventOfHighImportance == Integer.MIN_VALUE, limit: limit )
	then
		float totalHiImportance = m.getPartAbruptTurningHi() + m.getPartAggressiveLaneChangeHi() + m.getPartAggressiveLaneChangeMid() + m.getPartBarrierAvoidanceHi() + m.getPartBarrierAvoidanceMid() + m.getPartSkiddingHi();
		float highImportance = totalHiImportance/(limit * 6);
		Object [] content = new Object[1];
		content[0] = (int) totalHiImportance;
		System.out.println("visoka znacajnost " + highImportance + " ukupno " + totalHiImportance + " limit: " +limit);
		
		wizard.addText("Rule 51 Postavi eventOfHighImportance", content);
		m.setEventOfHighImportance(highImportance);
		update(m);
end

rule "Rule 52 Set text for SpinningHiAllowed"
	when
		m: Message( partSpinningHiAllowed > 0, processedSpinningHiAllowed == "No")
	then
		Date dateFrom = new java.text.SimpleDateFormat("yyyy-MM-dd HH:mm:ss").parse(m.getDateFrom() + " 00:00:00"); 
		Date dateTo = new java.text.SimpleDateFormat("yyyy-MM-dd HH:mm:ss").parse(m.getDateTo() + " 00:00:00");
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[5];
		content[0] = m.getNumHiSpinningAllowed();
		content[1] = m.getPartSpinningHiAllowed();
		content[2] = df.format((m.getPartSpinningHiAllowed() / m.getLimit())*100);
		content[3] = dateFrom;
		content[4] = dateTo;
		
		System.out.println("Ukupan broj dogadjaja 'Vehicle Spinning Allowed severity level Hi' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Ovi negativni bodovi ukupno ucestvuju u dozvoljenom limitu sa " + content[2] + "%. Ovi dogadjaji desili su se u periodu izmedju " + content[3] + " i " + content[4] + ". Ovde treba kao olaksavajucu okolnost uzeti vremenske uslove.");
		
		wizard.addTextWarning("Rule 52 Set text for SpinningHiAllowed", content);
		
		ArrayList<Triple> values = new ArrayList<Triple>();		
		
		for(SpinningHi sh : m.getSpinningList()) {
			Date datetimeTriggered = new java.text.SimpleDateFormat("yyyy-MM-dd HH:mm:ss").parse(sh.getDatetimeTriggered());
			if ( dateFrom.before(datetimeTriggered) && dateTo.after(datetimeTriggered) ) {
				values.add(new Triple(sh.getDatetimeTriggered(), sh.getSpeed(), sh.getDuration()));
			}
		}
		
		wizard.addData("Rule 52 Set text for SpinningHiAllowed", new ThreeDimData(
			new Dimension("Datum i vreme dogadaja"),
			new Dimension("Brzina vozila"),
			new Dimension("Duzina trajanja dogadjaja", "s"),
			values
		));
		
		m.setProcessedSpinningHiAllowed("Yes");
		update(m);
end 

rule "Rule 53 Set text for SpinningHiNotAllowed"
	when
		m: Message( partSpinningHiNotAllowed > 0, processedSpinningHiNotAllowed == "No" )
	then
		Date dateFrom = new java.text.SimpleDateFormat("yyyy-MM-dd HH:mm:ss").parse(m.getDateFrom() + " 00:00:00"); 
		Date dateTo = new java.text.SimpleDateFormat("yyyy-MM-dd HH:mm:ss").parse(m.getDateTo() + " 00:00:00");
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[3];
		content[0] = m.getNumHiSpinningNotAllowed();
		content[1] = m.getPartSpinningHiNotAllowed();
		content[2] = df.format((m.getPartSpinningHiNotAllowed() / m.getLimit())*100);
		
		wizard.addTextVeryNegative("Rule 53 Set text for SpinningHiNotAllowed", content);
		
		ArrayList<Triple> values = new ArrayList<Triple>();		
		
		for(SpinningHi sh : m.getSpinningList()) {
			Date datetimeTriggered = new java.text.SimpleDateFormat("yyyy-MM-dd HH:mm:ss").parse(sh.getDatetimeTriggered());
			if ( datetimeTriggered.before(dateFrom) || datetimeTriggered.after(dateTo) ) {
				values.add(new Triple(sh.getDatetimeTriggered(), sh.getSpeed(), sh.getDuration()));
			}
		}	
		
		wizard.addDataNegative("Rule 52 Set text for SpinningHiAllowed", new ThreeDimData(
			new Dimension("Datum i vreme dogadaja"),
			new Dimension("Brzina vozila"),
			new Dimension("Duzina trajanja dogadjaja", "s"),
			values
		));
		
		m.setProcessedSpinningHiNotAllowed("Yes");
		update(m);	
end

rule "Rule 54 Set text for AccHi for ok driver behavior"
	when
		m: Message( typeOfDriver == "ok" , partAccHi/total > eventOfLowerImportance, processedAccHi == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getNumHiAcc();
		content[1] = m.getPartAccHi();
		content[2] = df.format((m.getPartAccHi() / m.getLimit())*100);
		System.out.println("Ukupan broj dogadjaja 'Harsh acceleration severity level Hi' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Ovi negativni bodovi ukupno ucestvuju u dozvoljenom limitu sa " + content[2] + "%. Ovaj dogadjaj ucestvuje relativno malo u ukupnom limitu, sto dokazuje nasu tvrdnju da je ovaj vozac primeran vozac.");
		
		wizard.addTextPositive("Rule 54 Set text for AccHi for ok driver behavior", content);
		m.setProcessedAccHi("Yes");
		update(m);
end 

rule "Rule 55 Set text for AccMid for ok driver behavior"
	when
		m: Message( typeOfDriver == "ok" , partAccMid/total > eventOfLowerImportance, processedAccMid == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getNumMidAcc();
		content[1] = m.getPartAccMid();
		content[2] = df.format((m.getPartAccMid() / m.getLimit())*100);
		System.out.println("Ukupan broj dogadjaja 'Harsh acceleration severity level Mid' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Ovi negativni bodovi ukupno ucestvuju u dozvoljenom limitu sa " + content[2] + "%. Ovaj dogadjaj ucestvuje relativno malo u ukupnom limitu, sto dokazuje nasu tvrdnju da je ovaj vozac primeran vozac.");
		
		wizard.addTextPositive("Rule 55 Set text for AccMid for ok driver behavior", content);
		m.setProcessedAccMid("Yes");
		update(m);
end 

rule "Rule 56 Set text for DecHi for ok driver behavior"
	when
		m: Message( typeOfDriver == "ok" , partDecHi/total > eventOfLowerImportance, processedDecHi == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getNumHiDec();
		content[1] = m.getPartDecHi();
		content[2] = df.format((m.getPartDecHi() / m.getLimit())*100);
		System.out.println("Ukupan broj dogadjaja 'Harsh deceleration severity level Hi' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Ovi negativni bodovi ukupno ucestvuju u dozvoljenom limitu sa " + content[2] + "%. Ovaj dogadjaj ucestvuje relativno malo u ukupnom limitu, sto dokazuje nasu tvrdnju da je ovaj vozac primeran vozac.");
		
		wizard.addTextPositive("Rule 56 Set text for DecHi for ok driver behavior", content);
		m.setProcessedDecHi("Yes");
		update(m);
end

rule "Rule 57 Set text for DecMid for ok driver behavior"
	when
		m: Message( typeOfDriver == "ok" , partDecMid/total > eventOfLowerImportance, processedDecMid == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getNumMidDec();
		content[1] = m.getPartDecMid();
		content[2] = df.format((m.getPartDecMid() / m.getLimit())*100);
		System.out.println("Ukupan broj dogadjaja 'Harsh deceleration severity level Mid' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Ovi negativni bodovi ukupno ucestvuju u dozvoljenom limitu sa " + content[2] + "%. Ovaj dogadjaj ucestvuje relativno malo u ukupnom limitu, sto dokazuje nasu tvrdnju da je ovaj vozac primeran vozac.");
		
		wizard.addTextPositive("Rule 57 Set text for DecMid for ok driver behavior", content);
		m.setProcessedDecMid("Yes");
		update(m);
end

rule "Rule 58 Set text for CorneringHi for ok driver behavior"
	when
		m: Message( typeOfDriver == "ok" , partCorneringHi/total > eventOfLowerImportance, processedCorneringHi == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getNumHiCornering();
		content[1] = m.getPartCorneringHi();
		content[2] = df.format((m.getPartCorneringHi() / m.getLimit())*100);
		System.out.println("Ukupan broj dogadjaja 'Cornering severity level Hi' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Ovi negativni bodovi ukupno ucestvuju u dozvoljenom limitu sa " + content[2] + "%. Ovaj dogadjaj ucestvuje relativno malo u ukupnom limitu, sto dokazuje nasu tvrdnju da je ovaj vozac primeran vozac.");
		
		wizard.addTextPositive("Rule 58 Set text for CorneringHi for ok driver behavior", content);
		m.setProcessedCorneringHi("Yes");
		update(m);
end

rule "Rule 59 Set text for CorneringMid for ok driver behavior"
	when
		m: Message( typeOfDriver == "ok" , partCorneringMid/total > eventOfLowerImportance, processedCorneringMid == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getNumMidCornering();
		content[1] = m.getPartCorneringMid();
		content[2] = df.format((m.getPartCorneringMid() / m.getLimit())*100);
		System.out.println("Ukupan broj dogadjaja 'Cornering severity level Mid' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Ovi negativni bodovi ukupno ucestvuju u dozvoljenom limitu sa " + content[2] + "%. Ovaj dogadjaj ucestvuje relativno malo u ukupnom limitu, sto dokazuje nasu tvrdnju da je ovaj vozac primeran vozac.");
		
		wizard.addTextPositive("Rule 59 Set text for CorneringMid for ok driver behavior", content);
		m.setProcessedCorneringMid("Yes");
		update(m);
end

rule "Rule 60 Set text for Speed limit for ok driver behavior"
	when
		m: Message( typeOfDriver == "ok" , partSpeedLimit/total > eventOfLowerImportance, processedSpeedLimit == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[3];
		content[0] = m.getNumSpeedLimit();
		content[1] = m.getPartSpeedLimit();
		content[2] = df.format((m.getPartSpeedLimit() / m.getLimit())*100);
		System.out.println("Ukupan broj dogadjaja 'Speed limit notification' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Ovi negativni bodovi ukupno ucestvuju u dozvoljenom limitu sa " + content[2] + "%. Ovaj dogadjaj ucestvuje relativno malo u ukupnom limitu, sto dokazuje nasu tvrdnju da je ovaj vozac primeran vozac.");
		
		wizard.addTextPositive("Rule 60 Set text for Speed limit for ok driver behavior", content);
		m.setProcessedSpeedLimit("Yes");
		update(m);
end

rule "Rule 61 Set text for AbruptTurningHi for ok driver behavior"
	when
		m: Message( typeOfDriver == "ok", partAbruptTurningHi/total > eventOfHighImportance, processedAbruptTurningHi == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[3];
		content[0] = m.getNumHiAbruptTurning();
		content[1] = m.getPartAbruptTurningHi();
		content[2] = df.format((m.getPartAbruptTurningHi() / m.getLimit())*100);	
		System.out.println("Ukupan broj dogadjaja 'Abrupt turning severity level Hi' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Ovi negativni bodovi ukupno ucestvuju u dozvoljenom limitu sa " + content[2] + "%. Ovaj dogadjaj ucestvuje relativno malo u ukupnom limitu, Ali ipak treba skrenuti paznju vozacu kako nebi znacajno presao dozvoljeni limit.");
		
		wizard.addTextWarning("Rule 61 Set text for AbruptTurningHi for ok driver behavior", content);
		m.setProcessedAbruptTurningHi("Yes");
		update(m);
end 

rule "Rule 62 Set text for AggressiveLaneChangeHi for ok driver behaviour"
	when
		m: Message( typeOfDriver == "ok", partAggressiveLaneChangeHi/total > eventOfHighImportance, processedAggressiveLaneChangeHi == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[3];
		content[0] = m.getNumHiAggressiveLaneChange();
		content[1] = m.getPartAggressiveLaneChangeHi();
		content[2] = df.format((m.getPartAggressiveLaneChangeHi() / m.getLimit())*100);
		System.out.println("Ukupan broj dogadjaja 'Abrupt turning severity level Hi' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Ovi negativni bodovi ukupno ucestvuju u dozvoljenom limitu sa " + content[2] + "%. Ovaj dogadjaj ucestvuje relativno malo u ukupnom limitu, Ali ipak treba skrenuti paznju vozacu kako nebi znacajno presao dozvoljeni limit.");
		
		wizard.addTextWarning("Rule 62 Set text for AggressiveLaneChangeHi for ok driver behaviour", content);
		m.setProcessedAggressiveLaneChangeHi("Yes");
		update(m);
end 

rule "Rule 63 Set text for AggressiveLaneChangeMid for ok driver behaviour"
	when
		m: Message( typeOfDriver == "ok", partAggressiveLaneChangeMid/total > eventOfHighImportance, processedAggressiveLaneChangeMid == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[3];
		content[0] = m.getNumMidAggressiveLaneChange();
		content[1] = m.getPartAggressiveLaneChangeMid();
		content[2] = df.format((m.getPartAggressiveLaneChangeMid() / m.getLimit())*100);
		System.out.println("Ukupan broj dogadjaja 'Aggressive lane change severity level Mid' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Ovi negativni bodovi ukupno ucestvuju u dozvoljenom limitu sa " + content[2] + "%. Ovaj dogadjaj se generise ukoliko vozac agresivno zaobilazi vozilo ili grupu vozila. Ucesca ovog dogadjaja u ukupnoj sumi pokazuje nam da je vozac agresivan prilikom zaobilazenja drugih ucesnika u saobrcaju i da na taj nacin ugrozava kako svoju tako i bezbednost drugih.");
		
		wizard.addTextWarning("Rule 63 Set text for AggressiveLaneChangeMid for ok driver behaviour", content);
		m.setProcessedAggressiveLaneChangeMid("Yes");
		update(m);
end 

rule "Rule 64 Set text for BarrierAvoidanceHi for ok driver behaviour"
	when
		m: Message( typeOfDriver == "ok", partBarrierAvoidanceHi/total > eventOfHighImportance, processedBarrierAvoidanceHi == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[3];
		content[0] = m.getNumHiBarrierAvoidance();
		content[1] = m.getPartBarrierAvoidanceHi();
		content[2] = df.format((m.getPartAbruptTurningHi() / m.getLimit())*100);
		System.out.println("Ukupan broj dogadjaja 'Barrier avoidance severity level Hi' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Ovi negativni bodovi ukupno ucestvuju u dozvoljenom limitu sa " + content[2] + "%. Ovaj dogadjaj ucestvuje relativno malo u ukupnom limitu, Ali ipak treba skrenuti paznju vozacu kako nebi znacajno presao dozvoljeni limit.");
		
		wizard.addTextWarning("Rule 64 Set text for BarrierAvoidanceHi for ok driver behaviour", content);
		m.setProcessedBarrierAvoidanceHi("Yes");
		update(m);
end 

rule "Rule 65 Set text for BarrierAvoidanceMid for ok driver behaviour"
	when
		m: Message( typeOfDriver == "ok", partBarrierAvoidanceMid/total > eventOfHighImportance, processedBarrierAvoidanceMid == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[3];
		content[0] = m.getNumMidBarrierAvoidance();
		content[1] = m.getPartBarrierAvoidanceMid();
		content[2] = df.format((m.getPartBarrierAvoidanceMid() / m.getLimit())*100);
		System.out.println("Ukupan broj dogadjaja 'Barrier avoidance change severity level Mid' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Ovi negativni bodovi ukupno ucestvuju u dozvoljenom limitu sa " + content[2] + "%. Ovaj dogadjaj ucestvuje relativno malo u ukupnom limitu, Ali ipak treba skrenuti paznju vozacu kako nebi znacajno presao dozvoljeni limit.");
		
		wizard.addTextWarning("Rule 65 Set text for BarrierAvoidanceMid for ok driver behaviour", content);
		m.setProcessedBarrierAvoidanceHi("Yes");
		update(m);
end 

rule "Rule 66 Set text for SkiddingHi for ok driver behaviour"
	when
		m: Message( typeOfDriver == "ok", partSkiddingHi/total > eventOfHighImportance, processedSkiddingHi == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[3];
		content[0] = m.getNumHiSkidding();
		content[1] = m.getPartSkiddingHi();
		content[2] = df.format((m.getPartSkiddingHi() / m.getLimit())*100);
		System.out.println("Ukupan broj dogadjaja 'Vehicle skidding severity level Hi' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Ovi negativni bodovi ukupno ucestvuju u dozvoljenom limitu sa " + content[2] + "%. Ovaj dogadjaj ucestvuje relativno malo u ukupnom limitu, Ali ipak treba skrenuti paznju vozacu kako nebi znacajno presao dozvoljeni limit.");
		
		wizard.addTextWarning("Rule 66 Set text for SkiddingHi for ok driver behaviour", content);
		m.setProcessedSkiddingHi("Yes");
		update(m);
end 

rule "Rule 67 Set text for AccHi for bad driver behavior"
	when
		m: Message( typeOfDriver in ("border", "risk", "agresive") , partAccHi/total > eventOfLowerImportance, processedAccHi == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getNumHiAcc();
		content[1] = m.getPartAccHi();
		content[2] = df.format((m.getPartAccHi() / m.getLimit())*100);
		content[3] = m.getNumHiAcc() - m.getEventPerKmAccHi();
		System.out.println("Ukupan broj dogadjaja 'Harsh acceleration severity level Hi' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Ovi negativni bodovi ukupno ucestvuju u dozvoljenom limitu sa " + content[2] + "%. Kako bi popravio svoje ponasanje vozac mora smanjiti agresivnost prilikom naglog ubrzanja za " + content[3] + ".");
		
		wizard.addText("Rule 67 Set text for AccHi for bad driver behavior", content);
		m.setProcessedAccHi("Yes");
		update(m);
end 

rule "Rule 68 Set text for AccMid for bad driver behavior"
	when
		m: Message( typeOfDriver in ("border", "risk", "agresive") , partAccMid/total > eventOfLowerImportance, processedAccMid == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getNumMidAcc();
		content[1] = m.getPartAccMid();
		content[2] = df.format((m.getPartAccMid() / m.getLimit())*100);
		content[3] = m.getNumMidAcc() - m.getEventPerKmAccMid();
		System.out.println("Ukupan broj dogadjaja 'Harsh acceleration severity level Mid' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Ovi negativni bodovi ukupno ucestvuju u dozvoljenom limitu sa " + content[2] + "%. Kako bi popravio svoje ponasanje vozac mora smanjiti agresivnost prilikom ubrzanja za " + content[3] + ".");
		
		wizard.addText("Rule 68 Set text for AccMid for bad driver behavior", content);
		m.setProcessedAccMid("Yes");
		update(m);
end

rule "Rule 69 Set text for DecHi for bad driver behavior"
	when
		m: Message( typeOfDriver in ("border", "risk", "agresive") , partDecHi/total > eventOfLowerImportance, processedDecHi == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getNumHiDec();
		content[1] = m.getPartDecHi();
		content[2] = df.format((m.getPartDecHi() / m.getLimit())*100);
		content[3] = m.getNumHiDec() - m.getEventPerKmDecHi();
		System.out.println("Ukupan broj dogadjaja 'Harsh deceleration severity level Hi' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Ovi negativni bodovi ukupno ucestvuju u dozvoljenom limitu sa " + content[2] + "%.  Kako bi popravio svoje ponasanje vozac mora smanjiti agresivna nagla kocenja za: " + content[3] + ".");
		
		wizard.addText("Rule 69 Set text for DecHi for bad driver behavior", content);
		m.setProcessedDecHi("Yes");
		update(m);
end

rule "Rule 70 Set text for DecMid for bad driver behavior"
	when
		m: Message( typeOfDriver in ("border", "risk", "agresive") , partDecMid/total > eventOfLowerImportance, processedDecMid == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getNumMidDec();
		content[1] = m.getPartDecMid();
		content[2] = df.format((m.getPartDecMid() / m.getLimit())*100);
		content[3] = m.getNumMidDec() - m.getEventPerKmDecMid();
		System.out.println("Ukupan broj dogadjaja 'Harsh deceleration severity level Mid' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Ovi negativni bodovi ukupno ucestvuju u dozvoljenom limitu sa " + content[2] + "%.  Kako bi popravio svoje ponasanje vozac mora smanjiti nagla kocenja za: " + content[3] + ".");
		
		wizard.addText("Rule 70 Set text for DecMid for bad driver behavior", content);
		m.setProcessedDecMid("Yes");
		update(m);
end

rule "Rule 71 Set text for CorneringHi for bad driver behavior"
	when
		m: Message( typeOfDriver in ("border", "risk", "agresive") , partCorneringHi/total > eventOfLowerImportance, processedCorneringHi == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getNumHiCornering();
		content[1] = m.getPartCorneringHi();
		content[2] = df.format((m.getPartCorneringHi() / m.getLimit())*100);
		content[3] = m.getNumHiCornering() - m.getEventPerKmCorneringHi();
		System.out.println("Ukupan broj dogadjaja 'Cornering severity level Hi' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Ovi negativni bodovi ukupno ucestvuju u dozvoljenom limitu sa " + content[2] + "%.  Kako bi popravio svoje ponasanje vozac mora smanjiti agresivnost prilikom ulazenja u krivinu za: " + content[3] + " dogadjaja.");
		
		wizard.addText("Rule 71 Set text for CorneringHi for bad driver behavior", content);
		m.setProcessedCorneringHi("Yes");
		update(m);
end

rule "Rule 72 Set text for CorneringMid for bad driver behavior"
	when
		m: Message( typeOfDriver in ("border", "risk", "agresive") , partCorneringMid/total > eventOfLowerImportance, processedCorneringMid == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getNumMidCornering();
		content[1] = m.getPartCorneringMid();
		content[2] = df.format((m.getPartCorneringMid() / m.getLimit())*100);
		content[3] = m.getNumMidCornering() - m.getEventPerKmCorneringMid();
		System.out.println("Ukupan broj dogadjaja 'Cornering severity level Mid' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Ovi negativni bodovi ukupno ucestvuju u dozvoljenom limitu sa " + content[2] + "%.  Kako bi popravio svoje ponasanje vozac mora smanjiti nagle ulaske u krivinu za: " + content[3] + " dogadjaja.");
		
		wizard.addText("Rule 72 Set text for CorneringMid for bad driver behavior", content);
		m.setProcessedCorneringMid("Yes");
		update(m);
end

rule "Rule 73 Set text for Speed limit for bad driver behavior"
	when
		m: Message( typeOfDriver in ("border", "risk", "agresive") , partSpeedLimit/total > eventOfLowerImportance, processedSpeedLimit == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getNumSpeedLimit();
		content[1] = m.getPartSpeedLimit();
		content[2] = df.format((m.getPartSpeedLimit() / m.getLimit())*100);
		content[3] = m.getPartSpeedLimit() - m.getEventPerKmSpeedLimit();
		System.out.println("Ukupan broj dogadjaja 'Speed limit notification' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Ovi negativni bodovi ukupno ucestvuju u dozvoljenom limitu sa " + content[2] + "%. Ovaj dogadjaj predstavlja direktno krsenje pravila ponasanja vlasnika flote. Prelazak dozvoljenog limita direktno krsi pravila kompanije i kao takvo treba biti sankcionisano.");
		
		wizard.addText("Rule 73 Set text for Speed limit for bad driver behavior", content);
		m.setProcessedSpeedLimit("Yes");
		update(m);
end

rule "Rule 74 Set text for AbruptTurningHi if driver is agresive"
	when
		m: Message( typeOfDriver in ("border", "risk", "agresive"), partAbruptTurningHi/total > eventOfHighImportance, processedAbruptTurningHi == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getNumHiAbruptTurning();
		content[1] = m.getPartAbruptTurningHi();
		content[2] = df.format((m.getPartAbruptTurningHi() / m.getLimit())*100);
		content[3] = m.getPartAbruptTurningHi() - m.getEventPerKmAbruptTurningHi();	
		System.out.println("Ukupan broj dogadjaja 'Abrupt turning severity level Hi' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Ovi negativni bodovi ukupno ucestvuju u dozvoljenom limitu sa " + content[2] + "%. Ovaj dogadjaj se generise ako vozac gubi kontrolu nad vozilom prilikom skretanja. Pojava ovog dogadjaja u ukupnoj sumi negativnih bodova govori nam o tome da vozac ozbiljno ugrozava svoju bezbednost.");
		
		wizard.addTextWarning("Rule 74 Set text for AbruptTurningHi if driver is agresive", content);
		m.setProcessedAbruptTurningHi("Yes");
		update(m);
end 

rule "Rule 75 Set text for AggressiveLaneChangeHi if driver is agresive"
	when
		m: Message( typeOfDriver in ("border", "risk", "agresive"), partAggressiveLaneChangeHi/total > eventOfHighImportance, processedAggressiveLaneChangeHi == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getNumHiAggressiveLaneChange();
		content[1] = m.getPartAggressiveLaneChangeHi();
		content[2] = df.format((m.getPartAggressiveLaneChangeHi() / m.getLimit())*100);
		content[3] = m.getPartAggressiveLaneChangeHi() - m.getEventPerKmAggressiveLaneChangeHi();		
		System.out.println("Ukupan broj dogadjaja 'Aggressive lane change severity level Hi' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Ovi negativni bodovi ukupno ucestvuju u dozvoljenom limitu sa " + content[2] + "%. Ovaj dogadjaj se generise ukoliko vozac veoma agresivno zaobilazi vozilo ili grupu vozila. Ucesca ovog dogadjaja u ukupnoj sumi pokazuje nam da je vozac izuzetno agresivan prilikom zaobilazenja drugih ucesnika u saobracaju. Na ovaj nacin vozac ugrozava kako sebe tako i druge ucesnike u saobracaju.");
		
		wizard.addTextWarning("Rule 75 Set text for AggressiveLaneChangeHi if driver is agresive", content);
		m.setProcessedAggressiveLaneChangeHi("Yes");
		update(m);
end 

rule "Rule 76 Set text for AggressiveLaneChangeMid if driver is agresive"
	when
		m: Message( typeOfDriver in ("border", "risk", "agresive"), partAggressiveLaneChangeMid/total > eventOfHighImportance, processedAggressiveLaneChangeMid == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getNumMidAggressiveLaneChange();
		content[1] = m.getPartAggressiveLaneChangeMid();
		content[2] = df.format((m.getPartAggressiveLaneChangeMid() / m.getLimit())*100);
		content[3] = m.getPartAggressiveLaneChangeMid() - m.getEventPerKmAggressiveLaneChangeMid();
		System.out.println("Ukupan broj dogadjaja 'Aggressive lane change severity level Mid' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Ovi negativni bodovi ukupno ucestvuju u dozvoljenom limitu sa " + content[2] + "%. Ovaj dogadjaj se generise ukoliko vozac agresivno zaobilazi vozilo ili grupu vozila. Ucesca ovog dogadjaja u ukupnoj sumi pokazuje nam da je vozac agresivan prilikom zaobilazenja drugih ucesnika u saobrcaju i da na taj nacin ugrozava kako svoju tako i bezbednost drugih.");
		
		wizard.addTextWarning("Rule 76 Set text for AggressiveLaneChangeMid if driver is agresive", content);
		m.setProcessedAggressiveLaneChangeMid("Yes");
		update(m);
end 

rule "Rule 77 Set text for BarrierAvoidanceHi if driver is agresive"
	when
		m: Message( typeOfDriver in ("border", "risk", "agresive"), partBarrierAvoidanceHi/total > eventOfHighImportance, processedBarrierAvoidanceHi == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getNumHiBarrierAvoidance();
		content[1] = m.getPartBarrierAvoidanceHi();
		content[2] = df.format((m.getPartAbruptTurningHi() / m.getLimit())*100);
		content[3] = m.getPartBarrierAvoidanceHi() - m.getEventPerKmBarrierAvoidanceHi();
		System.out.println("Ukupan broj dogadjaja 'Barrier avoidance severity level Hi' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Ovi negativni bodovi ukupno ucestvuju u dozvoljenom limitu sa " + content[2] + "%. Ovaj dogadjaj se generise u slucaju kada vozac naglo pokusa da zaobidje prepreku na putu, pri tome praveci putanju u obliku latinicnog slova s. Ovaj dogadjaj ukazuje na veoma ozbiljan gubitak kontrole nad vozilom. Pojava ovog dogadjaja u totalnoj sumi negativnih bodova, ukazuje da je vozac veoma ne pazljiv i da time ugrozava bezbednost u saobracaju.");
		
		wizard.addTextWarning("Rule 77 Set text for BarrierAvoidanceHi if driver is agresive", content);
		m.setProcessedBarrierAvoidanceHi("Yes");
		update(m);
end 

rule "Rule 78 Set text for BarrierAvoidanceMid if driver is agresive"
	when
		m: Message( typeOfDriver in ("border", "risk", "agresive"), partBarrierAvoidanceMid/total > eventOfHighImportance, processedBarrierAvoidanceMid == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getNumMidBarrierAvoidance();
		content[1] = m.getPartBarrierAvoidanceMid();
		content[2] = df.format((m.getPartBarrierAvoidanceMid() / m.getLimit())*100);
		content[3] = m.getPartBarrierAvoidanceMid() - m.getEventPerKmBarrierAvoidanceMid();
		System.out.println("Ukupan broj dogadjaja 'Barrier avoidance change severity level Mid' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Ovi negativni bodovi ukupno ucestvuju u dozvoljenom limitu sa " + content[2] + "%. Ovaj dogadjaj se generise u slucaju kada vozac pokusa da zaobidje prepreku na putu, pri tome praveci putanju u obliku latinicnog slova s. Ovaj dogadjaj ukazuje na gubitak kontrole nad vozilom. Pojava ovog dogadjaja u totalnoj sumi negativnih bodova, ukazuje da je vozac ne pazljiv u upravljanju vozilom i da time ugrozava bezbednost u saobracaju.");
		
		wizard.addTextWarning("Rule 78 Set text for BarrierAvoidanceMid if driver is agresive", content);
		m.setProcessedBarrierAvoidanceHi("Yes");
		update(m);
end 

rule "Rule 79 Set text for SkiddingHi if driver is agresive"
	when
		m: Message( typeOfDriver in ("border", "risk", "agresive"), partSkiddingHi/total > eventOfHighImportance, processedSkiddingHi == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[3];
		content[0] = m.getNumHiSkidding();
		content[1] = m.getPartSkiddingHi();
		content[2] = df.format((m.getPartSkiddingHi() / m.getLimit())*100);
		System.out.println("Ukupan broj dogadjaja 'Vehicle skidding severity level Hi' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Ovi negativni bodovi ukupno ucestvuju u dozvoljenom limitu sa " + content[2] + "%.  Ovaj dogadjaj se generise kada vozilu pri ulasku u krivinu prokliza zadnji deo u odnosu na prednji (over-steering). Ovo uzrokuje nestabilnost vozila. Pojava ovog dogadjaja u ukupnoj negativnoj sumi znaci da vozac ugrozava bezbednost saobracaja veoma svojim agresivnim ponasanjem.");
		
		wizard.addTextWarning("Rule 79 Set text for SkiddingHi if driver is agresive", content);
		m.setProcessedSkiddingHi("Yes");
		update(m);
end 

rule "Rule 80 Set text for AccHi over limit for extreme drivers"
	when
		m: Message( typeOfDriver == "extreme" , partAccHi > limit, processedAccHi == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getNumHiAcc();
		content[1] = m.getPartAccHi();
		content[2] = df.format(((m.getPartAccHi() - m.getLimit())/m.getLimit()) * 100);
		content[3] = m.getPartAccHi() - m.getLimit();
		System.out.println("Ukupan broj dogadjaja 'Harsh acceleration severity level Hi' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Kako je suma ovih bodova veca za " + content[2] + "% od ukupnog dozvoljenog limita, tj. prelazi limit za " + content[3] + " bodova. Ovo pokazuje da je nasa tvrdnja da je ovaj vozac ekstreman u potpunosti opravdana");
		
		wizard.addTextVeryNegative("Rule 80 Set text for AccHi over limit for extreme drivers", content);
		m.setProcessedAccHi("Yes");
		update(m);
end 

rule "Rule 81 Set text for AccMid over limit for extreme drivers"
	when
		m: Message( typeOfDriver == "extreme" , partAccMid > limit, processedAccMid == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getNumMidAcc();
		content[1] = m.getPartAccMid();
		content[2] = df.format(((m.getPartAccMid() - m.getLimit())/ m.getLimit())*100);
		content[3] = m.getPartAccMid() - m.getLimit();
		System.out.println("Ukupan broj dogadjaja 'Harsh acceleration severity level Mid' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Kako je suma ovih bodova veca za " + content[2] + "% od ukupnog dozvoljenog limita, tj. prelazi limit za " + content[3] + " bodova. Ovo pokazuje da je nasa tvrdnja da je ovaj vozac ekstreman u potpunosti opravdana");
		
		wizard.addTextVeryNegative("Rule 81 Set text for AccMid over limit for extreme drivers", content);
		m.setProcessedAccMid("Yes");
		update(m);
end

rule "Rule 82 Set text for DecHi over limit for extreme drivers"
	when
		m: Message( typeOfDriver == "extreme" , partDecHi > limit, processedDecHi == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getNumHiDec();
		content[1] = m.getPartDecHi();
		content[2] = df.format(((m.getPartDecHi() - m.getLimit()) / m.getLimit())*100);
		content[3] = m.getPartDecHi() - m.getLimit();
		System.out.println("Ukupan broj dogadjaja 'Harsh deceleration severity level Hi' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Kako je suma ovih bodova veca za " + content[2] + "% od ukupnog dozvoljenog limita, tj. prelazi limit za " + content[3] + " bodova. Ovo pokazuje da je nasa tvrdnja da je ovaj vozac ekstreman u potpunosti opravdana");
		
		wizard.addTextVeryNegative("Rule 82 Set text for DecHi over limit for extreme drivers", content);
		m.setProcessedDecHi("Yes");
		update(m);
end

rule "Rule 83 Set text for DecMid over limit for extreme drivers"
	when
		m: Message( typeOfDriver == "extreme", partDecMid > limit, processedDecMid == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getNumMidDec();
		content[1] = m.getPartDecMid();
		content[2] = df.format(((m.getPartDecMid() - m.getLimit())/m.getLimit())*100);
		content[3] = m.getPartDecMid() - m.getLimit();
		System.out.println("Ukupan broj dogadjaja 'Harsh deceleration severity level Mid' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Kako je suma ovih bodova veca za " + content[2] + "% od ukupnog dozvoljenog limita, tj. prelazi limit za " + content[3] + " bodova. Ovo pokazuje da je nasa tvrdnja da je ovaj vozac ekstreman u potpunosti opravdana");
		
		wizard.addTextVeryNegative("Rule 83 Set text for DecMid over limit for extreme drivers", content);
		m.setProcessedDecMid("Yes");
		update(m);
end

rule "Rule 84 Set text for CorneringHi over limit for extreme drivers"
	when
		m: Message( typeOfDriver == "extreme", partCorneringHi > limit, processedCorneringHi == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getNumHiCornering();
		content[1] = m.getPartCorneringHi();
		content[2] = df.format(((m.getPartCorneringHi() - m.getLimit()) / m.getLimit())*100);
		content[3] = m.getPartCorneringHi() - m.getLimit();
		System.out.println("Ukupan broj dogadjaja 'Cornering severity level Hi' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Kako je suma ovih bodova veca za " + content[2] + "% od ukupnog dozvoljenog limita, tj. prelazi limit za " + content[3] + " bodova. Ovo pokazuje da je nasa tvrdnja da je ovaj vozac ekstreman u potpunosti opravdana");
		
		wizard.addTextVeryNegative("Rule 84 Set text for CorneringHi over limit for extreme drivers", content);
		m.setProcessedCorneringHi("Yes");
		update(m);
end

rule "Rule 85 Set text for CorneringMid over limit for extreme drivers"
	when
		m: Message( typeOfDriver == "extreme", partCorneringMid > limit, processedCorneringMid == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getNumMidCornering();
		content[1] = m.getPartCorneringMid();
		content[2] = df.format(((m.getPartCorneringMid() - m.getLimit())/ m.getLimit())*100);
		content[3] = m.getPartCorneringMid() - m.getLimit();
		System.out.println("Ukupan broj dogadjaja 'Cornering severity level Mid' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Kako je suma ovih bodova veca za " + content[2] + "% od ukupnog dozvoljenog limita, tj. prelazi limit za " + content[3] + " bodova. Ovo pokazuje da je nasa tvrdnja da je ovaj vozac ekstreman u potpunosti opravdana");
		
		wizard.addTextVeryNegative("Rule 85 Set text for CorneringMid over limit for extreme drivers", content);
		m.setProcessedCorneringMid("Yes");
		update(m);
end

rule "Rule 86 Set text for Speed limit over limit for extreme drivers"
	when
		m: Message( typeOfDriver == "extreme", partSpeedLimit > limit, processedSpeedLimit == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[3];
		content[0] = m.getNumSpeedLimit();
		content[1] = m.getPartSpeedLimit();
		content[2] = df.format(((m.getPartSpeedLimit() - m.getLimit()) / m.getLimit())*100);
		content[3] = m.getPartSpeedLimit() - m.getLimit();
		System.out.println("Ukupan broj dogadjaja 'Speed limit notification' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Kako je suma ovih bodova veca za " + content[2] + "% od ukupnog dozvoljenog limita, tj. prelazi limit za " + content[3] + " bodova. Ovo pokazuje da je nasa tvrdnja da je ovaj vozac ekstreman u potpunosti opravdana");
		
		wizard.addTextVeryNegative("Rule 86 Set text for Speed limit over limit for extreme drivers", content);
		m.setProcessedSpeedLimit("Yes");
		update(m);
end

rule "Rule 87 Set text for AbruptTurningHi over limit for extreme drivers"
	when
		m: Message( typeOfDriver == "extreme", partAbruptTurningHi > limit, processedAbruptTurningHi == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[3];
		content[0] = m.getNumHiAbruptTurning();
		content[1] = m.getPartAbruptTurningHi();
		content[2] = df.format(((m.getPartAbruptTurningHi() - m.getLimit()) / m.getLimit())*100);
		content[3] = m.getPartAbruptTurningHi() - m.getLimit();	
		System.out.println("Ukupan broj dogadjaja 'Abrupt turning severity level Hi' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Kako je suma ovih bodova veca za " + content[2] + "% od ukupnog dozvoljenog limita, tj. prelazi limit za " + content[3] + " bodova. Ovo pokazuje da je nasa tvrdnja da je ovaj vozac ekstreman u potpunosti opravdana");
		
		wizard.addTextVeryNegative("Rule 87 Set text for AbruptTurningHi over limit for extreme drivers", content);
		m.setProcessedAbruptTurningHi("Yes");
		update(m);
end 

rule "Rule 88 Set text for AggressiveLaneChangeHi over limit for extreme drivers"
	when
		m: Message( typeOfDriver == "extreme", partAggressiveLaneChangeHi > limit, processedAggressiveLaneChangeHi == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[3];
		content[0] = m.getNumHiAggressiveLaneChange();
		content[1] = m.getPartAggressiveLaneChangeHi();
		content[2] = df.format(((m.getPartAggressiveLaneChangeHi() - m.getLimit()) / m.getLimit())*100);
		content[3] = m.getPartAggressiveLaneChangeHi() - m.getLimit();	
		System.out.println("Ukupan broj dogadjaja 'Aggressive lane change severity level Hi' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Kako je suma ovih bodova veca za " + content[2] + "% od ukupnog dozvoljenog limita, ovo pokazuje da je nasa tvrdnja da je ovaj vozac ekstreman u potpunosti opravdana");
		
		wizard.addTextVeryNegative("Rule 88 Set text for AggressiveLaneChangeHi over limit for extreme drivers", content);
		m.setProcessedAggressiveLaneChangeHi("Yes");
		update(m);
end 

rule "Rule 89 Set text for AggressiveLaneChangeMid over limit for extreme drivers"
	when
		m: Message( typeOfDriver == "extreme", partAggressiveLaneChangeMid > limit, processedAggressiveLaneChangeMid == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[3];
		content[0] = m.getNumMidAggressiveLaneChange();
		content[1] = m.getPartAggressiveLaneChangeMid();
		content[2] = df.format(((m.getPartAggressiveLaneChangeMid() - m.getLimit())/ m.getLimit())*100);
		content[3] = m.getPartAggressiveLaneChangeMid() - m.getLimit();
		System.out.println("Ukupan broj dogadjaja 'Aggressive lane change severity level Mid' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Kako je suma ovih bodova veca za " + content[2] + "% od ukupnog dozvoljenog limita, tj. prelazi limit za " + content[3] + " bodova. Ovo pokazuje da je nasa tvrdnja da je ovaj vozac ekstreman u potpunosti opravdana");
		
		wizard.addTextVeryNegative("Rule 89 Set text for AggressiveLaneChangeMid over limit for extreme drivers", content);
		m.setProcessedAggressiveLaneChangeMid("Yes");
		update(m);
end 

rule "Rule 90 Set text for BarrierAvoidanceHi over limit for extreme drivers"
	when
		m: Message( typeOfDriver == "extreme", partBarrierAvoidanceHi > limit, processedBarrierAvoidanceHi == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[3];
		content[0] = m.getNumHiBarrierAvoidance();
		content[1] = m.getPartBarrierAvoidanceHi();
		content[2] = df.format(((m.getPartBarrierAvoidanceHi() - m.getLimit()) / m.getLimit())*100);
		content[3] = m.getPartBarrierAvoidanceHi() - m.getLimit();
		System.out.println("Ukupan broj dogadjaja 'Barrier avoidance severity level Mid' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Kako je suma ovih bodova veca za " + content[2] + "% od ukupnog dozvoljenog limita, tj. prelazi limit za " + content[3] + " bodova. Ovo pokazuje da je nasa tvrdnja da je ovaj vozac ekstreman u potpunosti opravdana");
		
		wizard.addTextVeryNegative("Rule 90 Set text for BarrierAvoidanceHi over limit for extreme drivers", content);
		m.setProcessedBarrierAvoidanceHi("Yes");
		update(m);
end 

rule "Rule 91 Set text for BarrierAvoidanceMid over limit for extreme drivers"
	when
		m: Message( typeOfDriver == "extreme", partBarrierAvoidanceMid > limit, processedBarrierAvoidanceMid == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[3];
		content[0] = m.getNumMidBarrierAvoidance();
		content[1] = m.getPartBarrierAvoidanceMid();
		content[2] = df.format(((m.getPartBarrierAvoidanceMid() - m.getLimit())/ m.getLimit())*100);
		content[3] = m.getPartBarrierAvoidanceMid() - m.getLimit();
		System.out.println("Ukupan broj dogadjaja 'Barrier avoidance severity level Mid' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Kako je suma ovih bodova veca za " + content[2] + "% od ukupnog dozvoljenog limita, tj. prelazi limit za " + content[3] + " bodova. Ovo pokazuje da je nasa tvrdnja da je ovaj vozac ekstreman u potpunosti opravdana");
		
		wizard.addTextVeryNegative("Rule 91 Set text for BarrierAvoidanceMid over limit for extreme drivers", content);
		m.setProcessedBarrierAvoidanceHi("Yes");
		update(m);
end 

rule "Rule 92 Set text for SkiddingHi over limit for extreme drivers"
	when
		m: Message( typeOfDriver == "extreme", partSkiddingHi > limit, processedSkiddingHi == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getNumHiSkidding();
		content[1] = m.getPartSkiddingHi();
		content[2] = df.format(((m.getPartSkiddingHi() - m.getLimit()) / m.getLimit())*100);
		content[3] = m.getPartSkiddingHi() - m.getLimit();
		System.out.println("Ukupan broj dogadjaja 'Vehicle skidding severity level Hi' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Kako je suma ovih bodova veca za " + content[2] + "% od ukupnog dozvoljenog limita, tj. prelazi limit za " + content[3] + " bodova. Ovo pokazuje da je nasa tvrdnja da je ovaj vozac ekstreman u potpunosti opravdana");
		
		wizard.addTextVeryNegative("Rule 92 Set text for SkiddingHi over limit for extreme drivers", content);
		m.setProcessedSkiddingHi("Yes");
		update(m);
end

rule "Rule 93 Set text for AccHi below the limit for extreme drivers"
	when
		m: Message( typeOfDriver == "extreme" , partAccHi > 0, partAccHi < limit, processedAccHi == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getNumHiAcc();
		content[1] = m.getPartAccHi();
		content[2] = df.format((m.getPartAccHi() / m.getLimit())*100);
		System.out.println("Ukupan broj dogadjaja 'Harsh acceleration severity level Hi' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Suma ovih bodova ucestvuje u ukupnom limitu sa " + content[2] + "%, sto podrzava tvrdnju da je ovaj vozac ekstreman." );
		
		wizard.addTextNegative("Rule 93 Set text for AccHi below the limit for extreme drivers", content);
		m.setProcessedAccHi("Yes");
		update(m);
end 

rule "Rule 94 Set text for AccMid below the limit for extreme drivers"
	when
		m: Message( typeOfDriver == "extreme" , partAccMid > 0, partAccMid < limit, processedAccMid == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getNumMidAcc();
		content[1] = m.getPartAccMid();
		content[2] = df.format((m.getPartAccMid() / m.getLimit())*100);
		System.out.println("Ukupan broj dogadjaja 'Harsh acceleration severity level Mid' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Suma ovih bodova ucestvuje u ukupnom limitu sa " + content[2] + "%, sto podrzava tvrdnju da je ovaj vozac ekstreman.");
		
		wizard.addTextNegative("Rule 94 Set text for AccMid below the limit for extreme drivers", content);
		m.setProcessedAccMid("Yes");
		update(m);
end

rule "Rule 95 Set text for DecHi below the limit for extreme drivers"
	when
		m: Message( typeOfDriver == "extreme" , partDecHi > 0, partDecHi < limit, processedDecHi == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getNumHiDec();
		content[1] = m.getPartDecHi();
		content[2] = df.format((m.getPartDecHi() / m.getLimit())*100);
		System.out.println("Ukupan broj dogadjaja 'Harsh deceleration severity level Hi' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Suma ovih bodova ucestvuje u ukupnom limitu sa " + content[2] + "%, sto podrzava tvrdnju da je ovaj vozac ekstreman.");
		
		wizard.addTextNegative("Rule 95 Set text for DecHi below the limit for extreme drivers", content);
		m.setProcessedDecHi("Yes");
		update(m);
end

rule "Rule 96 Set text for DecMid below the limit for extreme drivers"
	when
		m: Message( typeOfDriver == "extreme", partDecMid > 0, partDecMid < limit, processedDecMid == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getNumMidDec();
		content[1] = m.getPartDecMid();
		content[2] = df.format((m.getPartDecMid() / m.getLimit())*100);
		System.out.println("Ukupan broj dogadjaja 'Harsh deceleration severity level Mid' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Suma ovih bodova ucestvuje u ukupnom limitu sa " + content[2] + "%, sto podrzava tvrdnju da je ovaj vozac ekstreman.");
		
		wizard.addTextNegative("Rule 96 Set text for DecMid below the limit for extreme drivers", content);
		m.setProcessedDecMid("Yes");
		update(m);
end

rule "Rule 97 Set text for CorneringHi below the limit for extreme drivers"
	when
		m: Message( typeOfDriver == "extreme", partCorneringHi > 0, partCorneringHi < limit, processedCorneringHi == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getNumHiCornering();
		content[1] = m.getPartCorneringHi();
		content[2] = df.format((m.getPartCorneringHi() / m.getLimit())*100);
		System.out.println("Ukupan broj dogadjaja 'Cornering severity level Hi' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Suma ovih bodova ucestvuje u ukupnom limitu sa " + content[2] + "%, sto podrzava tvrdnju da je ovaj vozac ekstreman.");
		
		wizard.addTextNegative("Rule 97 Set text for CorneringHi below the limit for extreme drivers", content);
		m.setProcessedCorneringHi("Yes");
		update(m);
end

rule "Rule 98 Set text for CorneringMid below the limit for extreme drivers"
	when
		m: Message( typeOfDriver == "extreme", partCorneringMid >0, partCorneringMid < limit, processedCorneringMid == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[4];
		content[0] = m.getNumMidCornering();
		content[1] = m.getPartCorneringMid();
		content[2] = df.format((m.getPartCorneringMid() / m.getLimit())*100);
		System.out.println("Ukupan broj dogadjaja 'Cornering severity level Mid' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Suma ovih bodova ucestvuje u ukupnom limitu sa " + content[2] + "%, sto podrzava tvrdnju da je ovaj vozac ekstreman.");
		
		wizard.addTextNegative("Rule 98 Set text for CorneringMid below the limit for extreme drivers", content);
		m.setProcessedCorneringMid("Yes");
		update(m);
end

rule "Rule 99 Set text for Speed limit below the limit for extreme drivers"
	when
		m: Message( typeOfDriver == "extreme", partSpeedLimit > 0, partSpeedLimit < limit, processedSpeedLimit == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[3];
		content[0] = m.getNumSpeedLimit();
		content[1] = m.getPartSpeedLimit();
		content[2] = df.format((m.getPartSpeedLimit() / m.getLimit())*100);
		System.out.println("Ukupan broj dogadjaja 'Speed limit notification' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Suma ovih bodova ucestvuje u ukupnom limitu sa " + content[2] + "%, sto podrzava tvrdnju da je ovaj vozac ekstreman.");
		
		wizard.addTextNegative("Rule 99 Set text for Speed limit below the limit for extreme drivers", content);
		m.setProcessedSpeedLimit("Yes");
		update(m);
end

rule "Rule 100 Set text for AbruptTurningHi below the limit for extreme drivers"
	when
		m: Message( typeOfDriver == "extreme", partAbruptTurningHi > 0, partAbruptTurningHi < limit, processedAbruptTurningHi == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[3];
		content[0] = m.getNumHiAbruptTurning();
		content[1] = m.getPartAbruptTurningHi();
		content[2] = df.format((m.getPartAbruptTurningHi() / m.getLimit())*100);
		System.out.println("Ukupan broj dogadjaja 'Abrupt turning severity level Hi' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Suma ovih bodova ucestvuje u ukupnom limitu sa " + content[2] + "%, sto podrzava tvrdnju da je ovaj vozac ekstreman.");
		
		wizard.addTextNegative("Rule 100 Set text for AbruptTurningHi below the limit for extreme drivers", content);
		m.setProcessedAbruptTurningHi("Yes");
		update(m);
end 

rule "Rule 101 Set text for AggressiveLaneChangeHi below the limit for extreme drivers"
	when
		m: Message( typeOfDriver == "extreme", partAggressiveLaneChangeHi > 0, partAggressiveLaneChangeHi < limit, processedAggressiveLaneChangeHi == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[3];
		content[0] = m.getNumHiAggressiveLaneChange();
		content[1] = m.getPartAggressiveLaneChangeHi();
		content[2] = df.format((m.getPartAggressiveLaneChangeHi() / m.getLimit())*100);
		System.out.println("Ukupan broj dogadjaja 'Aggressive lane change severity level Hi' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Suma ovih bodova ucestvuje u ukupnom limitu sa " + content[2] + "%, sto podrzava tvrdnju da je ovaj vozac ekstreman.");
		
		wizard.addTextNegative("Rule 101 Set text for AggressiveLaneChangeHi below the limit for extreme drivers", content);
		m.setProcessedAggressiveLaneChangeHi("Yes");
		update(m);
end 

rule "Rule 102 Set text for AggressiveLaneChangeMid below the limit for extreme drivers"
	when
		m: Message( typeOfDriver == "extreme", partAggressiveLaneChangeMid > 0, partAggressiveLaneChangeMid < limit, processedAggressiveLaneChangeMid == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[3];
		content[0] = m.getNumMidAggressiveLaneChange();
		content[1] = m.getPartAggressiveLaneChangeMid();
		content[2] = df.format((m.getPartAggressiveLaneChangeMid() / m.getLimit())*100);
		System.out.println("Ukupan broj dogadjaja 'Aggressive lane change severity level Mid' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Suma ovih bodova ucestvuje u ukupnom limitu sa " + content[2] + "%, sto podrzava tvrdnju da je ovaj vozac ekstreman.");
		
		wizard.addTextNegative("Rule 102 Set text for AggressiveLaneChangeMid below the limit for extreme drivers", content);
		m.setProcessedAggressiveLaneChangeMid("Yes");
		update(m);
end 

rule "Rule 103 Set text for BarrierAvoidanceHi below the limit for extreme drivers"
	when
		m: Message( typeOfDriver == "extreme", partBarrierAvoidanceHi > 0, partBarrierAvoidanceHi < limit, processedBarrierAvoidanceHi == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[3];
		content[0] = m.getNumHiBarrierAvoidance();
		content[1] = m.getPartBarrierAvoidanceHi();
		content[2] = df.format((m.getPartBarrierAvoidanceHi() / m.getLimit())*100);
		System.out.println("Ukupan broj dogadjaja 'Barrier avoidance severity level Hi' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Suma ovih bodova ucestvuje u ukupnom limitu sa " + content[2] + "%, sto podrzava tvrdnju da je ovaj vozac ekstreman.");
		
		wizard.addTextNegative("Rule 103 Set text for BarrierAvoidanceHi below the limit for extreme drivers", content);
		m.setProcessedBarrierAvoidanceHi("Yes");
		update(m);
end 

rule "Rule 104 Set text for BarrierAvoidanceMid below the limit for extreme drivers"
	when
		m: Message( typeOfDriver == "extreme", partBarrierAvoidanceMid > 0, partBarrierAvoidanceMid < limit, processedBarrierAvoidanceMid == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[3];
		content[0] = m.getNumMidBarrierAvoidance();
		content[1] = m.getPartBarrierAvoidanceMid();
		content[2] = df.format((m.getPartBarrierAvoidanceMid() / m.getLimit())*100);
		System.out.println("Ukupan broj dogadjaja 'Barrier avoidance severity level Mid' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Suma ovih bodova ucestvuje u ukupnom limitu sa " + content[2] + "%, sto podrzava tvrdnju da je ovaj vozac ekstreman.");
		
		wizard.addTextNegative("Rule 104 Set text for BarrierAvoidanceMid below the limit for extreme drivers", content);
		m.setProcessedBarrierAvoidanceHi("Yes");
		update(m);
end 

rule "Rule 105 Set text for SkiddingHi below the limit for extreme drivers"
	when
		m: Message( typeOfDriver == "extreme", partSkiddingHi > 0, partSkiddingHi < limit, processedSkiddingHi == "No" )
	then
		DecimalFormat df = new DecimalFormat();
		df.setMaximumFractionDigits(2);
		Object [] content = new Object[3];
		content[0] = m.getNumHiSkidding();
		content[1] = m.getPartSkiddingHi();
		content[2] = df.format((m.getPartSkiddingHi() / m.getLimit())*100);
		System.out.println("Ukupan broj dogadjaja 'Vehicle skidding severity level Hi' iznosi: " + content[0] + " koji na ukupnu predjenu kilometrazu iznosi " + content[1] + " negativnih bodova. Suma ovih bodova ucestvuje u ukupnom limitu sa " + content[2] + "%, sto podrzava tvrdnju da je ovaj vozac ekstreman.");
		
		wizard.addTextNegative("Rule 105 Set text for SkiddingHi below the limit for extreme drivers", content);
		m.setProcessedSkiddingHi("Yes");
		update(m);
end

rule "Rule 106 Additionally conclusion about speeding"
	when
		m: Message( typeOfDriver in ("ok", "border", "risk", "agresive"), additionallyConclusion1 == "No") and 
		( Message( processedAccHi == "Yes", processedAccMid == "Yes" ) or
		  Message( processedAccHi == "Yes", processedSpeedLimit == "Yes" ) or
		  Message( processedAccMid == "Yes", processedSpeedLimit == "Yes" ) or
		  Message( processedAccHi == "Yes", processedAccMid == "Yes", processedSpeedLimit == "Yes" ) )
	then
		System.out.println("Ocigledno je da ovaj vozac voli da vozi brzo. Treba delovati savetodavno da smanji brzinu prilikom voznje kako bi se smanjili i negativni poeni koje on pravi ovakvim ponasanjem");
		
		wizard.addText("Rule 106 Additionally conclusion about speeding", null);
		m.setAdditionallyConclusion1("Yes");
		update(m);
end

rule "Rule 107 Additionally conclusion about avoidance"
	when
		m: Message( typeOfDriver in ("ok", "border", "risk", "agresive"), additionallyConclusion2 == "No") and
		( Message( processedDecHi == "Yes", processedDecHi == "Yes" ) or
		  Message( processedBarrierAvoidanceHi == "Yes", processedBarrierAvoidanceMid == "Yes" ) or 
		  ( Message( processedDecHi == "Yes" || processedDecHi == "Yes" ) and
		    Message( processedBarrierAvoidanceHi == "Yes" || processedBarrierAvoidanceMid == "Yes" ) )
		)
	then
		System.out.println("Ovaj vozac je ocigledno nepazljiv prilikom voznje. Trebalo bi ga savetovati da vodi vise racuna prilikom voznje kako bi smanjio broj negativnih poena");

		wizard.addText("Rule 107 Additionally conclusion about avoidance", null);
		m.setAdditionallyConclusion2("Yes");
		update(m);
end;

rule "Rule 108 Additionally conclusion about cornering"
	when
		m: Message( typeOfDriver in ("ok", "border", "risk", "agresive"), additionallyConclusion3 == "No") and
		( Message( typeOfDriver in ("ok", "border", "risk", "agresive"), processedCorneringHi == "Yes", processedCorneringMid  == "Yes" ) or
		  Message( typeOfDriver in ("ok", "border", "risk", "agresive"), processedAbruptTurningHi == "Yes", processedSkiddingHi == "Yes") or
		  ( Message( typeOfDriver in ("ok", "border", "risk", "agresive"), processedCorneringHi == "Yes" || processedCorneringMid  == "Yes" ) and 
		    Message( typeOfDriver in ("ok", "border", "risk", "agresive"), processedAbruptTurningHi == "Yes" || processedSkiddingHi == "Yes") )
	    )	
	then
		System.out.println("Vozac ocigledno voli da rizikuje u krivini. Trebalo bi ga savetovati da malo laganije ulazi u krivinu kako bi smanjio ukupan broj negativnih bodova.");
		
		wizard.addText("Rule 108 Additionally conclusion about cornering", null);
		m.setAdditionallyConclusion3("Yes");
		update(m);
end

